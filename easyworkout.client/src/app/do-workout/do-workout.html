<form [formGroup]="form">
  <h2>Doing workout...</h2>
  <h3>{{ workoutGoal().name }}</h3>

  @for (exercise of orderedExercises; track exercise.id; let exIndex = $index) {
    <div [formGroup]="exercisesArray.at(exIndex)">
      <h4>Exercise #{{ exIndex + 1 }}: {{ exercise.name }}</h4>

      <div formArrayName="sets">
        @for (set of exercise.exerciseSets; track set.id; let setIndex = $index) {
          <div [formGroupName]="setIndex">
            <span>Set {{ set.setNumber }}:</span>

            @if (set.reps) {
              <input type="number" title="reps" formControlName="reps" /> /
              <span>{{ set.reps }} reps</span>
            }

            @if (set.weight) {
              - <input type="number" title="weight" formControlName="weight" /> /
              <span>{{ set.weight }} {{ set.weightUnit }}</span>
            }

            @if (set.duration) {
              - <input type="number" title="duration" formControlName="duration" /> /
              <span>{{ set.duration }} {{ set.durationUnit }}</span>
            }
          </div>
        }
      </div>
    </div>
  }

  <button (click)="submit()">Finish and save</button>
</form>
