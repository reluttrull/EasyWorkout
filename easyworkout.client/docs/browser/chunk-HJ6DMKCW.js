import{Aa as A,Ba as q,C as g,Ca as P,D as c,Da as $,Ea as L,F as m,Fa as z,G as re,Ga as pe,H as i,Ha as xe,I as b,Ia as fe,J as h,K as J,La as _e,Ma as Ce,N as K,Na as ve,Oa as Ee,P as Z,Pa as Se,Q as oe,Qa as k,S as E,T as w,V as ae,ba as se,ea as y,fa as D,g as H,ga as Q,h as u,ha as T,i as p,ia as V,j as F,ja as N,ka as le,l as s,la as me,m as M,ma as ce,n as I,na as de,q as f,qa as B,r as _,ra as U,s as S,sa as R,t as C,ta as G,u as v,ua as ue,v as x,w as n,x as t,xa as j,y as d,ya as O,za as W}from"./chunk-KB2XFZIE.js";function we(r,a){if(r&1&&(i(0," - "),n(1,"span")(2,"strong"),i(3,"Reps:"),t(),i(4),t()),r&2){let e=m();s(4),h(" ",e.set().reps)}}function ye(r,a){if(r&1&&(i(0," - "),n(1,"span")(2,"strong"),i(3,"Weight"),t(),i(4),t()),r&2){let e=m();s(4),J(" (",e.set().weightUnit,"): ",e.set().weight)}}function De(r,a){if(r&1&&(i(0," - "),n(1,"span")(2,"strong"),i(3,"Duration"),t(),i(4),t()),r&2){let e=m();s(4),J(" (",e.set().durationUnit,") ",e.set().duration)}}function Ne(r,a){if(r&1&&(i(0," - "),n(1,"span")(2,"strong"),i(3,"Distance"),t(),i(4),t()),r&2){let e=m();s(4),J(" (",e.set().distanceUnit,") ",e.set().distance)}}var X=class r{exercisesService=H(k);set=w.required();exerciseId=w.required();onSetChanged=E();delete(a){confirm("Are you sure you want to delete this set?")?(console.log("id",this.set().id),this.exercisesService.deleteSet(this.exerciseId(),a).subscribe({next:()=>{this.onSetChanged.emit()},error:e=>console.error(e)}),console.log("Item deleted")):console.log("Deletion cancelled")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=I({type:r,selectors:[["app-set"]],inputs:{set:[1,"set"],exerciseId:[1,"exerciseId"]},outputs:{onSetChanged:"onSetChanged"},decls:12,vars:5,consts:[[1,"box"],["matIconButton","","extended","","aria-label","delete set",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"span")(2,"strong"),i(3,"Set #:"),t(),i(4),t(),f(5,we,5,1),f(6,ye,5,2),f(7,De,5,2),f(8,Ne,5,2),n(9,"button",1),c("click",function(){return o.delete(o.set().id)}),n(10,"mat-icon"),i(11,"delete"),t()()()),e&2&&(s(4),h(" ",o.set().setNumber+1),s(),_(o.set().reps?5:-1),s(),_(o.set().weight?6:-1),s(),_(o.set().duration?7:-1),s(),_(o.set().distance?8:-1))},dependencies:[D,y,N,Q],encapsulation:2})};function ke(r,a){if(r&1&&(n(0,"mat-option",7),i(1),t()),r&2){let e=a.$implicit;x("value",e),s(),b(e)}}function Fe(r,a){if(r&1&&(n(0,"mat-option",7),i(1),t()),r&2){let e=a.$implicit;x("value",e),s(),b(e)}}function Te(r,a){if(r&1&&(n(0,"mat-option",7),i(1),t()),r&2){let e=a.$implicit;x("value",e),s(),b(e)}}function Ve(r,a){if(r&1&&(n(0,"div",13),i(1),t()),r&2){let e=a.$implicit;s(),b(e)}}var Y=class r{fb=H(W);exercisesService=H(k);exerciseId=w.required();onCreate=E();onReturn=E();form=this.fb.nonNullable.group({reps:[null],weight:[null],weightUnit:[null],duration:[null],durationUnit:[null],distance:[null],distanceUnit:[null]});validationErrors=F([]);WeightUnit=_e;DurationUnit=Ce;DistanceUnit=ve;weightUnitOptions=Object.values(this.WeightUnit);durationUnitOptions=Object.values(this.DurationUnit);distanceUnitOptions=Object.values(this.DistanceUnit);submit(){this.validationErrors.set([]);let a={reps:this.form.value.reps,weight:this.form.value.weight,weightUnit:this.form.value.weightUnit,duration:this.form.value.duration,durationUnit:this.form.value.durationUnit,distance:this.form.value.distance,distanceUnit:this.form.value.distanceUnit};this.exercisesService.createSet(this.exerciseId(),a).subscribe({next:e=>{this.onCreate.emit(),this.onReturn.emit()},error:e=>{if(e.status==400&&e.error?.errors)for(let o of Object.keys(e.error.errors))this.validationErrors.update(l=>[...l,...e.error.errors[o]]);else this.validationErrors.update(o=>[...o,"An unexpected error occurred."])}})}return(){this.form.reset(),this.onReturn.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=I({type:r,selectors:[["app-create-set"]],inputs:{exerciseId:[1,"exerciseId"]},outputs:{onCreate:"onCreate",onReturn:"onReturn"},decls:56,vars:1,consts:[[3,"ngSubmit","formGroup"],[1,"small-form-field"],["matInput","","placeholder","Reps","formControlName","reps","type","number"],["matInput","","placeholder","Weight","formControlName","weight","type","number"],[1,"medium-form-field"],["matInput","","title","Weight Units","placeholder","Weight Units","formControlName","weightUnit"],["value",""],[3,"value"],["matInput","","placeholder","Duration","formControlName","duration","type","number"],["title","Duration Units","placeholder","Duration Units","formControlName","durationUnit"],["matInput","","placeholder","Distance","formControlName","distance","type","number"],["matInput","","title","Distance Units","placeholder","Distance Units","formControlName","distanceUnit"],["matFab","","extended","","type","submit"],[1,"error"],["matButton","elevated",3,"click"]],template:function(e,o){e&1&&(n(0,"h2"),i(1,"Add a set:"),t(),n(2,"form",0),c("ngSubmit",function(){return o.submit()}),n(3,"div")(4,"mat-form-field",1)(5,"mat-label"),i(6,"Reps"),t(),d(7,"input",2),t()(),n(8,"div")(9,"mat-form-field",1)(10,"mat-label"),i(11,"Weight"),t(),d(12,"input",3),t(),n(13,"mat-form-field",4)(14,"mat-label"),i(15,"Weight units:"),t(),n(16,"mat-select",5)(17,"mat-option",6),i(18,"--Please choose an option--"),t(),C(19,ke,2,2,"mat-option",7,S),t()()(),n(21,"div")(22,"mat-form-field",1)(23,"mat-label"),i(24,"Duration"),t(),d(25,"input",8),t(),n(26,"mat-form-field",4)(27,"mat-label"),i(28,"Duration units:"),t(),n(29,"mat-select",9)(30,"mat-option",6),i(31,"--Please choose an option--"),t(),C(32,Fe,2,2,"mat-option",7,S),t()()(),n(34,"div")(35,"mat-form-field",1)(36,"mat-label"),i(37,"Distance"),t(),d(38,"input",10),t(),n(39,"mat-form-field",4)(40,"mat-label"),i(41,"Distance units:"),t(),n(42,"mat-select",11)(43,"mat-option",6),i(44,"--Please choose an option--"),t(),C(45,Te,2,2,"mat-option",7,S),t()()(),n(47,"button",12)(48,"mat-icon"),i(49,"save"),t(),i(50," Save set "),t(),n(51,"div"),C(52,Ve,2,1,"div",13,S),t()(),n(54,"button",14),c("click",function(){return o.return()}),i(55,"Cancel"),t()),e&2&&(s(2),x("formGroup",o.form),s(17),v(o.weightUnitOptions),s(13),v(o.durationUnitOptions),s(13),v(o.distanceUnitOptions),s(7),v(o.validationErrors()))},dependencies:[A,G,B,ue,U,R,O,j,D,y,N,T,V,$,P,q,z,L,fe,xe,pe],encapsulation:2})};var Ue=(r,a)=>a.id;function Re(r,a){if(r&1){let e=g();n(0,"button",3),c("click",function(){u(e);let l=m(2);return p(l.remove(l.exercise().id))}),n(1,"mat-icon"),i(2,"remove"),t(),n(3,"span"),i(4,"Remove exercise"),t()()}}function Ge(r,a){if(r&1){let e=g();n(0,"div")(1,"app-set",8),c("onSetChanged",function(){u(e);let l=m(3);return p(l.reload())}),t()()}if(r&2){let e=a.$implicit,o=m(3);s(),x("set",e)("exerciseId",o.exercise().id)}}function je(r,a){if(r&1){let e=g();n(0,"app-create-set",9),c("onCreate",function(){u(e);let l=m(3);return p(l.reload())})("onReturn",function(){u(e);let l=m(3);return p(l.returnCreateSet())}),t()}if(r&2){let e=m(3);x("exerciseId",e.exercise().id)}}function Oe(r,a){if(r&1){let e=g();n(0,"button",10),c("click",function(){u(e);let l=m(3);return p(l.clickCreateSet())}),i(1," Add set "),t()}}function We(r,a){if(r&1){let e=g();n(0,"div"),C(1,Ge,2,2,"div",null,Ue),K(3,"orderBy"),n(4,"button",5),c("click",function(){u(e);let l=m(2);return p(l.toggleExerciseDetail())}),n(5,"mat-icon"),i(6,"expand_less"),t()(),f(7,je,1,1,"app-create-set",6)(8,Oe,2,0,"button",7),t()}if(r&2){let e=m(2);s(),v(oe(3,1,e.exercise().exerciseSets,"setNumber","asc")),s(6),_(e.isCreateSetVisible?7:8)}}function Ae(r,a){if(r&1){let e=g();n(0,"div")(1,"strong"),i(2,"Number of sets:"),t(),i(3),t(),n(4,"button",11),c("click",function(){u(e);let l=m(2);return p(l.toggleExerciseDetail())}),n(5,"mat-icon"),i(6,"expand_more"),t()()}if(r&2){let e=m(2);s(3),h(" ",e.exercise().exerciseSets.length)}}function qe(r,a){if(r&1){let e=g();n(0,"h3")(1,"strong"),i(2,"Exercise:"),t(),i(3),n(4,"button",2)(5,"mat-icon"),i(6,"more_vert"),t()(),n(7,"mat-menu",null,0)(9,"button",3),c("click",function(){u(e);let l=m();return p(l.edit())}),n(10,"mat-icon"),i(11,"edit"),t(),n(12,"span"),i(13,"Edit exercise"),t()(),f(14,Re,5,0,"button",4),n(15,"button",3),c("click",function(){u(e);let l=m();return p(l.delete(l.exercise().id))}),n(16,"mat-icon"),i(17,"delete"),t(),n(18,"span"),i(19,"Delete exercise"),t()()()(),n(20,"div")(21,"strong"),i(22,"Notes:"),t(),i(23),t(),n(24,"div")(25,"strong"),i(26,"Date created:"),t(),i(27),K(28,"date"),t(),n(29,"div")(30,"em"),i(31,"Last edited:"),t(),i(32),K(33,"date"),t(),f(34,We,9,5,"div")(35,Ae,7,1)}if(r&2){let e=re(8),o=m();s(3),h(" ",o.exercise().name," "),s(),x("matMenuTriggerFor",e),s(10),_(o.workoutId()?14:-1),s(9),h(" ",o.exercise().notes),s(4),h(" ",Z(28,7,o.exercise().addedDate,"MMM dd, yyyy")),s(5),h(" ",Z(33,10,o.exercise().lastEditedDate,"MMM dd, yyyy 'at' hh:mm a")),s(2),_(o.exerciseDetail?34:35)}}function Pe(r,a){if(r&1&&(n(0,"div",16),i(1),t()),r&2){let e=a.$implicit;s(),b(e)}}function $e(r,a){if(r&1){let e=g();n(0,"h2"),i(1,"Edit Exercise:"),t(),n(2,"form",12),c("ngSubmit",function(){u(e);let l=m();return p(l.update())}),n(3,"mat-form-field")(4,"mat-label"),i(5,"Name"),t(),d(6,"input",13),t(),d(7,"br"),n(8,"mat-form-field")(9,"mat-label"),i(10,"Notes"),t(),d(11,"textarea",14),t(),d(12,"br"),n(13,"button",15)(14,"mat-icon"),i(15,"save"),t(),i(16," Save changes "),t(),n(17,"div"),C(18,Pe,2,1,"div",16,S),t()(),n(20,"button",17),c("click",function(){u(e);let l=m();return p(l.cancelEdit())}),i(21,"Cancel"),t()}if(r&2){let e=m();s(2),x("formGroup",e.form),s(16),v(e.validationErrors())}}var Me=class r{constructor(a,e,o){this.workoutsService=a;this.exercisesService=e;this.fb=o;this.form=this.fb.nonNullable.group({name:[""],notes:[""]})}form;validationErrors=F([]);exercise=w.required();workoutId=w();onExerciseChanged=E();exerciseDetail=!1;isEditMode=!1;isCreateSetVisible=!1;toggleExerciseDetail(){this.exerciseDetail=!this.exerciseDetail}clickCreateSet(){this.isCreateSetVisible=!0}returnCreateSet(){this.isCreateSetVisible=!1}edit(){this.form.setValue({name:this.exercise().name,notes:this.exercise().notes}),this.isEditMode=!this.isEditMode}cancelEdit(){this.isEditMode=!1}reload(){this.onExerciseChanged.emit()}update(){this.validationErrors.set([]),this.exercisesService.update(this.exercise().id,this.form.value).subscribe({next:()=>{this.onExerciseChanged.emit(),this.isEditMode=!1},error:a=>{if(a.status==400&&a.error?.errors)for(let e of Object.keys(a.error.errors))this.validationErrors.update(o=>[...o,...a.error.errors[e]]);else this.validationErrors.update(e=>[...e,"An unexpected error occurred."])}})}remove(a){this.workoutsService.removeExercise(this.workoutId()??"",a).subscribe({next:()=>{this.onExerciseChanged.emit()},error:e=>console.error(e)})}delete(a){confirm(`Are you sure you want to delete exercise ${this.exercise().name}?  It will also be deleted from every workout it's attached to.`)?(console.log("id",this.exercise().id),this.exercisesService.delete(this.exercise().id).subscribe({next:()=>{this.onExerciseChanged.emit()},error:e=>console.error(e)}),console.log("Item deleted")):console.log("Deletion cancelled")}static \u0275fac=function(e){return new(e||r)(M(Ee),M(k),M(W))};static \u0275cmp=I({type:r,selectors:[["app-exercise"]],inputs:{exercise:[1,"exercise"],workoutId:[1,"workoutId"]},outputs:{onExerciseChanged:"onExerciseChanged"},decls:3,vars:1,consts:[["menu","matMenu"],[1,"box","exercise"],["matIconButton","","aria-label","menu for exercise-related buttons",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item",""],["matIconButton","","aria-label","hide set detail",3,"click"],[3,"exerciseId"],["matButton","elevated","extended",""],[3,"onSetChanged","set","exerciseId"],[3,"onCreate","onReturn","exerciseId"],["matButton","elevated","extended","",3,"click"],["matIconButton","","aria-label","show set detail",3,"click"],[3,"ngSubmit","formGroup"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Notes","formControlName","notes",1,"text-area"],["matFab","","extended","","type","submit"],[1,"error"],["matButton","elevated",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1),f(1,qe,36,13)(2,$e,22,1),t()),e&2&&(s(),_(o.isEditMode?2:1))},dependencies:[A,G,B,U,R,O,j,D,y,N,T,Q,V,$,P,q,z,L,de,me,le,ce,X,Y,Se,ae],encapsulation:2})};function Le(r,a){if(r&1&&(n(0,"div",4),i(1),t()),r&2){let e=a.$implicit;s(),b(e)}}var Ie=class r{constructor(a,e,o){this.fb=a;this.router=e;this.exercisesService=o;this.form=this.fb.nonNullable.group({name:[""],notes:[""]})}onCreate=E();onReturn=E();form;validationErrors=F([]);submit(){this.validationErrors.set([]);let a={name:this.form.value.name,notes:this.form.value.notes};this.exercisesService.create(a).subscribe({next:e=>{this.onCreate.emit(e.id),this.onReturn.emit()},error:e=>{if(e.status==400&&e.error.errors)for(let o of Object.keys(e.error.errors))this.validationErrors.update(l=>[...l,...e.error.errors[o]]);else this.validationErrors.update(o=>[...o,"An unexpected error occurred."])}})}return(){this.form.reset(),this.onReturn.emit()}static \u0275fac=function(e){return new(e||r)(M(W),M(se),M(k))};static \u0275cmp=I({type:r,selectors:[["app-create-exercise"]],outputs:{onCreate:"onCreate",onReturn:"onReturn"},decls:23,vars:1,consts:[[3,"ngSubmit","formGroup"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Notes","formControlName","notes",1,"text-area"],["matFab","","extended","","type","submit"],[1,"error"],["matButton","elevated",3,"click"]],template:function(e,o){e&1&&(n(0,"div")(1,"h2"),i(2,"Create an Exercise:"),t(),n(3,"form",0),c("ngSubmit",function(){return o.submit()}),n(4,"mat-form-field")(5,"mat-label"),i(6,"Name"),t(),d(7,"input",1),t(),d(8,"br"),n(9,"mat-form-field")(10,"mat-label"),i(11,"Notes"),t(),d(12,"textarea",2),t(),d(13,"br"),n(14,"button",3)(15,"mat-icon"),i(16,"save"),t(),i(17," Save exercise "),t(),n(18,"div"),C(19,Le,2,1,"div",4,S),t()(),n(21,"button",5),c("click",function(){return o.return()}),i(22,"Cancel"),t()()),e&2&&(s(3),x("formGroup",o.form),s(16),v(o.validationErrors()))},dependencies:[A,G,B,U,R,O,j,D,y,N,T,V,$,P,q,z,L],encapsulation:2})};export{Me as a,Ie as b};
