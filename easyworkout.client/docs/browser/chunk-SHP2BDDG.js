import{a as be,b as ge}from"./chunk-QCGS2F47.js";import{A as l,Ba as de,Bb as U,C as N,Ca as ue,Cb as K,D as k,Db as z,Eb as H,Fb as J,Ib as Q,J as v,Ja as G,Jb as X,K as w,L as T,M as b,Mb as Y,N as g,Nb as Z,O as x,Ob as W,P as n,Pb as ke,Q as o,Qa as P,Qb as ve,R as _,Ra as h,Rb as ee,S as F,Sb as we,T as V,Tb as Ee,V as p,X as c,Z as m,ab as pe,cb as M,db as $,ea as ce,eb as S,ha as r,ia as B,ja as f,lb as _e,mb as xe,nb as fe,oa as I,ob as Ce,q as C,qa as R,r as d,ra as A,rb as L,s as u,ua as y,ub as j,va as D,vb as O,w as E,xb as q}from"./chunk-L2QWWM6R.js";var te=class t{exercise=D.required();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-exercise-brief"]],inputs:{exercise:[1,"exercise"]},decls:15,vars:3,template:function(e,a){e&1&&(F(0,"div")(1,"span")(2,"strong"),r(3,"Exercise:"),V(),r(4),V(),r(5," - "),F(6,"span")(7,"strong"),r(8,"Notes:"),V(),r(9),V(),r(10," - "),F(11,"span")(12,"strong"),r(13,"Date created:"),V(),r(14),V()()),e&2&&(l(4),f(" ",a.exercise().name),l(5),f(" ",a.exercise().notes),l(5),f(" ",a.exercise().addedDate))},encapsulation:2})};var he=(t,i)=>i.id;function Me(t,i){if(t&1){let e=p();n(0,"div",2),c("click",function(){let s=d(e).$implicit,le=m();return u(le.add(s.id))}),_(1,"app-exercise-brief",3),o()}if(t&2){let e=i.$implicit;l(),x("exercise",e)}}function Se(t,i){if(t&1){let e=p();n(0,"app-create-exercise",4),c("onCreate",function(s){d(e);let le=m();return u(le.add(s))})("onReturn",function(){d(e);let s=m();return u(s.closeCreate())}),o()}}function We(t,i){if(t&1){let e=p();n(0,"button",5),c("click",function(){d(e);let s=m();return u(s.toggleIsCreateVisible())}),r(1," Create new exercise "),o(),n(2,"button",5),c("click",function(){d(e);let s=m();return u(s.close())}),r(3,"Cancel"),o()}}var ne=class t{constructor(i){this.exercisesService=i;this.loadExercises()}workoutsService=C(W);exercises=E([]);workoutId=D.required();onClose=y();isCreateVisible=!1;add(i){this.workoutsService.addExercise(this.workoutId(),i).subscribe({next:()=>{this.onClose.emit()},error:e=>console.error(e)})}close(){this.onClose.emit()}closeCreate(){this.loadExercises(),this.isCreateVisible=!1}loadExercises(){this.exercisesService.getAll().subscribe(i=>this.exercises.set(i))}toggleIsCreateVisible(){this.isCreateVisible=!this.isCreateVisible}static \u0275fac=function(e){return new(e||t)(N(we))};static \u0275cmp=k({type:t,selectors:[["app-add-exercise"]],inputs:{workoutId:[1,"workoutId"]},outputs:{onClose:"onClose"},decls:6,vars:5,consts:[[1,"borderless-box"],[1,"box"],[1,"box",3,"click"],[3,"exercise"],[3,"onCreate","onReturn"],["matButton","elevated",3,"click"]],template:function(e,a){e&1&&(n(0,"div",0),b(1,Me,2,1,"div",1,he),I(3,"orderBy"),v(4,Se,1,0,"app-create-exercise")(5,We,4,0),o()),e&2&&(l(),g(A(3,1,a.exercises(),"addedDate","asc")),l(3),w(a.isCreateVisible?4:5))},dependencies:[h,S,M,te,ge,ee],encapsulation:2})};var De=(t,i)=>i.id;function Ne(t,i){if(t&1&&(n(0,"div")(1,"em"),r(2,"Last completed:"),o(),r(3),I(4,"date"),o()),t&2){let e=m(2);l(3),f(" ",R(4,1,e.workout().lastCompletedDate,"MMM dd, yyyy 'at' hh:mm a"))}}function Fe(t,i){if(t&1){let e=p();n(0,"div")(1,"app-exercise",5),c("onExerciseChanged",function(){d(e);let s=m(3);return u(s.reloadWorkout())}),o()()}if(t&2){let e=i.$implicit,a=m(3);l(),x("exercise",e)("workoutId",a.workout().id)}}function Be(t,i){if(t&1){let e=p();n(0,"app-add-exercise",6),c("onClose",function(){d(e);let s=m(3);return u(s.closeAddExercise())}),o()}if(t&2){let e=m(3);x("workoutId",e.workout().id)}}function Re(t,i){if(t&1){let e=p();n(0,"div")(1,"button",7),c("click",function(){d(e);let s=m(3);return u(s.toggleWorkoutDetail())}),n(2,"mat-icon"),r(3,"expand_less"),o()(),n(4,"button",8),c("click",function(){d(e);let s=m(3);return u(s.openAddExercise())}),r(5," Add exercise "),o()()}}function Ae(t,i){if(t&1&&(b(0,Fe,2,2,"div",null,De),I(2,"orderBy"),v(3,Be,1,1,"app-add-exercise",4)(4,Re,6,0,"div")),t&2){let e=m(2);g(A(2,1,e.workout().exercises,"addedDate","asc")),l(3),w(e.isAddMode?3:4)}}function Ge(t,i){if(t&1){let e=p();n(0,"div")(1,"strong"),r(2,"Number of exercises:"),o(),r(3),o(),n(4,"button",9),c("click",function(){d(e);let s=m(2);return u(s.toggleWorkoutDetail())}),n(5,"mat-icon"),r(6,"expand_more"),o()()}if(t&2){let e=m(2);l(3),f(" ",e.workout().exercises.length)}}function Pe(t,i){if(t&1){let e=p();n(0,"h2")(1,"strong"),r(2,"Workout:"),o(),r(3),n(4,"button",2)(5,"mat-icon"),r(6,"more_vert"),o()(),n(7,"mat-menu",null,0)(9,"button",3),c("click",function(){d(e);let s=m();return u(s.startWorkout())}),n(10,"mat-icon"),r(11,"fitness_center"),o(),n(12,"span"),r(13,"Start workout"),o()(),n(14,"button",3),c("click",function(){d(e);let s=m();return u(s.edit())}),n(15,"mat-icon"),r(16,"edit"),o(),n(17,"span"),r(18,"Edit Workout"),o()(),n(19,"button",3),c("click",function(){d(e);let s=m();return u(s.delete())}),n(20,"mat-icon"),r(21,"delete"),o(),n(22,"span"),r(23,"Delete workout"),o()()()(),n(24,"div")(25,"strong"),r(26,"Notes:"),o(),r(27),o(),n(28,"div")(29,"strong"),r(30,"Date created:"),o(),r(31),I(32,"date"),o(),n(33,"div")(34,"em"),r(35,"Last edited:"),o(),r(36),I(37,"date"),o(),v(38,Ne,5,4,"div"),v(39,Ae,5,5)(40,Ge,7,1)}if(t&2){let e=ce(8),a=m();l(3),f(" ",a.workout().name," "),l(),x("matMenuTriggerFor",e),l(23),f(" ",a.workout().notes),l(4),f(" ",R(32,7,a.workout().addedDate,"MMM dd, yyyy")),l(5),f(" ",R(37,10,a.workout().lastEditedDate,"MMM dd, yyyy 'at' hh:mm a")),l(2),w(a.workout().lastCompletedDate?38:-1),l(),w(a.workoutDetail?39:40)}}function $e(t,i){if(t&1&&(n(0,"div",14),r(1),o()),t&2){let e=i.$implicit;l(),B(e)}}function Le(t,i){if(t&1){let e=p();n(0,"h2"),r(1,"Edit Workout:"),o(),n(2,"form",10),c("ngSubmit",function(){d(e);let s=m();return u(s.update())}),n(3,"mat-form-field")(4,"mat-label"),r(5,"Name"),o(),_(6,"input",11),o(),_(7,"br"),n(8,"mat-form-field")(9,"mat-label"),r(10,"Notes"),o(),_(11,"textarea",12),o(),_(12,"br"),n(13,"button",13)(14,"mat-icon"),r(15,"save"),o(),r(16," Save changes "),o(),n(17,"div"),b(18,$e,2,1,"div",14,T),o()(),n(20,"button",8),c("click",function(){d(e);let s=m();return u(s.cancelEdit())}),r(21,"Cancel"),o()}if(t&2){let e=m();l(2),x("formGroup",e.form),l(16),g(e.validationErrors())}}var re=class t{fb=C(z);router=C(G);workoutsService=C(W);form=this.fb.nonNullable.group({name:[""],notes:[""]});validationErrors=E([]);onReturn=y();workout=D.required();onWorkoutChanged=y();workoutDetail=!1;isEditMode=!1;isAddMode=!1;toggleWorkoutDetail(){this.workoutDetail=!this.workoutDetail}openAddExercise(){this.isAddMode=!0}closeAddExercise(){this.isAddMode=!1,this.reloadWorkout()}reloadWorkout(){this.onWorkoutChanged.emit()}startWorkout(){this.router.navigate([`do-workout/${this.workout().id}`])}edit(){this.form.setValue({name:this.workout().name,notes:this.workout().notes}),this.isEditMode=!0}cancelEdit(){this.isEditMode=!1}update(){this.validationErrors.set([]),this.workoutsService.update(this.workout().id,this.form.value).subscribe({next:()=>{this.onWorkoutChanged.emit(),this.isEditMode=!1},error:i=>{if(i.status==400&&i.error?.errors)for(let e of Object.keys(i.error.errors))this.validationErrors.update(a=>[...a,...i.error.errors[e]]);else this.validationErrors.update(e=>[...e,"An unexpected error occurred."])}})}delete(){confirm(`Are you sure you want to delete workout ${this.workout().name}?  It will also be deleted from every workout log it's attached to.`)?(console.log("id",this.workout().id),this.workoutsService.delete(this.workout().id).subscribe({next:()=>{this.onWorkoutChanged.emit()},error:i=>console.error(i)}),console.log("Item deleted")):console.log("Deletion cancelled")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-workout"]],inputs:{workout:[1,"workout"]},outputs:{onReturn:"onReturn",onWorkoutChanged:"onWorkoutChanged"},decls:3,vars:1,consts:[["menu","matMenu"],[1,"box"],["matIconButton","","aria-label","menu for workout-related buttons",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[3,"workoutId"],[3,"onExerciseChanged","exercise","workoutId"],[3,"onClose","workoutId"],["matIconButton","","aria-label","hide exercise detail",3,"click"],["matButton","elevated",3,"click"],["matIconButton","","aria-label","show exercise detail",3,"click"],[3,"ngSubmit","formGroup"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Notes","formControlName","notes",1,"text-area"],["matFab","","extended","","type","submit"],[1,"error"]],template:function(e,a){e&1&&(n(0,"div",1),v(1,Pe,41,13)(2,Le,22,1),o()),e&2&&(l(),w(a.isEditMode?2:1))},dependencies:[H,q,L,j,O,K,U,h,P,S,M,pe,$,X,Q,J,Z,Y,Ce,xe,_e,fe,be,ne,de,ee],encapsulation:2})};function je(t,i){if(t&1&&(n(0,"div",4),r(1),o()),t&2){let e=i.$implicit;l(),B(e)}}var ae=class t{fb=C(z);router=C(G);workoutsService=C(W);onReturn=y();form=this.fb.nonNullable.group({name:[""],notes:[""]});validationErrors=E([]);submit(){this.validationErrors.set([]);let i={name:this.form.value.name,notes:this.form.value.notes};this.workoutsService.create(i).subscribe({next:()=>{this.onReturn.emit()},error:e=>{if(e.status==400&&e.error?.errors)for(let a of Object.keys(e.error.errors))this.validationErrors.update(s=>[...s,...e.error.errors[a]]);else this.validationErrors.update(a=>[...a,"An unexpected error occurred."])}})}return(){this.form.reset(),this.onReturn.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["app-create-workout"]],outputs:{onReturn:"onReturn"},decls:22,vars:1,consts:[[3,"ngSubmit","formGroup"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Notes","formControlName","notes",1,"text-area"],["matFab","","extended","","type","submit"],[1,"error"],["matButton","elevated",3,"click"]],template:function(e,a){e&1&&(n(0,"h2"),r(1,"Create a Workout:"),o(),n(2,"form",0),c("ngSubmit",function(){return a.submit()}),n(3,"mat-form-field")(4,"mat-label"),r(5,"Name"),o(),_(6,"input",1),o(),_(7,"br"),n(8,"mat-form-field")(9,"mat-label"),r(10,"Notes"),o(),_(11,"textarea",2),o(),_(12,"br"),n(13,"button",3)(14,"mat-icon"),r(15,"save"),o(),r(16," Save workout "),o(),n(17,"div"),b(18,je,2,1,"div",4,T),o()(),n(20,"button",5),c("click",function(){return a.return()}),r(21,"Cancel"),o()),e&2&&(l(2),x("formGroup",a.form),l(16),g(a.validationErrors()))},dependencies:[H,q,L,j,O,K,U,h,P,S,M,$,X,Q,J,Z,Y],encapsulation:2})};function Oe(t,i){if(t&1){let e=p();n(0,"div")(1,"app-workout",1),c("onWorkoutChanged",function(){d(e);let s=m(2);return u(s.reload())}),o()()}if(t&2){let e=i.$implicit;l(),x("workout",e)}}function qe(t,i){if(t&1&&b(0,Oe,2,1,"div",null,T),t&2){let e=m();g(e.workouts())}}function Ue(t,i){t&1&&_(0,"mat-spinner")}function Ke(t,i){if(t&1){let e=p();n(0,"app-create-workout",2),c("onReturn",function(){d(e);let s=m();return u(s.handleCancelCreate())}),o()}}function ze(t,i){if(t&1){let e=p();n(0,"button",3),c("click",function(){d(e);let s=m();return u(s.showAddWorkout())}),r(1," Create new workout "),o()}}var se=class t{constructor(i){this.service=i;this.reload()}workouts=E([]);isLoaded=E(!1);isCreateVisible=!1;reload(){this.service.getAll().subscribe(i=>{this.workouts.set(i),this.isLoaded.set(!0)})}showAddWorkout(){this.isCreateVisible=!0}handleCancelCreate(){this.isCreateVisible=!1,this.reload()}static \u0275fac=function(e){return new(e||t)(N(W))};static \u0275cmp=k({type:t,selectors:[["ng-component"]],decls:7,vars:2,consts:[["matButton","elevated"],[3,"onWorkoutChanged","workout"],[3,"onReturn"],["matButton","elevated",3,"click"]],template:function(e,a){e&1&&(n(0,"div")(1,"h2"),r(2,"My Workouts"),o(),v(3,qe,2,0)(4,Ue,1,0,"mat-spinner"),v(5,Ke,1,0,"app-create-workout")(6,ze,2,0,"button",0),o()),e&2&&(l(3),w(a.isLoaded()?3:4),l(2),w(a.isCreateVisible?5:6))},dependencies:[ue,ve,ke,S,M,h,re,ae],encapsulation:2})};var Ht=[{path:"",component:se,canActivate:[Ee]}];export{Ht as WORKOUTS_ROUTES};
